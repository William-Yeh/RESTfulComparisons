apply plugin:'java'
apply plugin:'idea'

version = '1.0'
sourceCompatibility = 1.7
targetCompatibility = 1.7

repositories {
    mavenCentral()
}

dependencies {
    compile 'io.dropwizard:dropwizard-core:0.8.0'
}

jar {
    manifest {
       attributes 'Main-Class': "org.tappoz.rest.HelloWorldApplication"
    }

    from {
        configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
    }
}

//task fatJar(type: Jar) {
//    from files(sourceSets.main.output.classesDir)
//    from files(sourceSets.main.output.resourcesDir)
////    from {configurations.compile.collect {zipTree(it)}} // this does not include the autogenerated source code
//    baseName = project.name + '-fatJar'
//    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
//    with jar
//}

//jar {
//    manifest {
//        attributes "Implementation-Title": "Gradle Quickstart"
//        attributes "Implementation-Version": version
//        attributes "Main-Class" : mainClassName
//    } // remove the security files (from mail.jar / activation.jar) so that the jar will be executable.
//    doFirst {
//        from (
//            configurations.runtime.resolve().collect {
//                it.isDirectory() ? it : zipTree(it)
//        })
//        {
//            exclude 'META-INF/MANIFEST.MF'
//            exclude 'META-INF/*.SF'
//            exclude 'META-INF/*.DSA'
//            exclude 'META-INF/*.RSA'
//        }
//    }
//}